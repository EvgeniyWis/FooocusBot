from aiogram.types import InlineKeyboardButton, InlineKeyboardMarkup

from bot.keyboards.startGeneration.buttons import getGenerationsTypeButtons


# –ò–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
def generateVideoKeyboard(model_name: str, image_index: int):
    kb = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="‚ö°Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±—ã—á–Ω–æ–≥–æ –≤–∏–¥–µ–æ",
                    callback_data=f"quick_video_generation|{model_name}|{image_index}",
                ),
            ],
            [
                InlineKeyboardButton(
                    text="ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è NSFW –≤–∏–¥–µ–æ",
                    callback_data=f"generate_comfyui_video|{model_name}|{image_index}",
                ),
            ],
        ],
    )

    return kb


# –ò–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
def generatedVideoKeyboard(prefix: str, with_test_generation: bool = True):
    inline_keyboard = getGenerationsTypeButtons(
        prefix,
        with_test_generation=with_test_generation,
    )

    kb = InlineKeyboardMarkup(inline_keyboard=inline_keyboard)

    return kb


# –ò–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
def videoGenerationTypeKeyboard(
    model_name: str,
    image_index: int | None = None,
):
    if image_index is None:
        prefix = f"generate_video|{model_name}"
    else:
        prefix = f"generate_video|{model_name}|{image_index}"

    kb = InlineKeyboardMarkup(
        inline_keyboard=[
            *getGenerationsTypeButtons(
                prefix=prefix,
                with_work_generation=False,
                with_test_generation=False,
                rewrite_prompt=True,
            ),
        ],
    )

    return kb


# –ò–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
def videoCorrectnessKeyboard(
    model_name: str,
    image_index: int | None = None,
):
    
    if image_index is None:
        postfix = f"{model_name}"
    else:
        postfix = f"{model_name}|{image_index}"

    kb = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∏–¥–µ–æ",
                    callback_data=f"video_correctness|correct|{postfix}",
                ),
            ],
            [
                InlineKeyboardButton(
                    text="üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–≤—ã–º –ø—Ä–æ–º–ø—Ç–æ–º",
                    callback_data=f"quick_video_generation|{postfix}",
                ),
            ],
        ],
    )

    return kb


def nsfw_video_generation_insert_length_video_keyboard():
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [InlineKeyboardButton(
                    text="‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é",
                    callback_data="video_length_choice|default",
                )],
                [
                InlineKeyboardButton(
                    text="‚úíÔ∏è –í–≤–µ—Å—Ç–∏ —Å–≤–æ—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
                    callback_data="video_length_choice|input",
                )],
        ],
    )
    return keyboard
